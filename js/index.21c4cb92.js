(function(e){function t(t){for(var a,i,u=t[0],l=t[1],o=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);s&&s(t);while(d.length)d.shift()();return c.push.apply(c,o||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,u=1;u<n.length;u++){var l=n[u];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={index:0},c=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var s=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},"1cde":function(e,t,n){},2:function(e,t){},"26de":function(e,t,n){"use strict";n("5f17")},"335b":function(e,t,n){"use strict";n("f9a0")},"3bcc":function(e,t,n){"use strict";n("50f9")},5073:function(e,t,n){"use strict";n("ff4a")},"50f9":function(e,t,n){},"5f17":function(e,t,n){},"6bdf":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var a,r=n("57d2"),c=n("7a28"),i=(n("241c"),n("f542"),n("2252"),n("46c3"),n("5a85"),n("534d"),n("c1c3"),n("79c4")),u=n("cd49"),l=n("cfe9"),o=n("bd5c");function s(t){var n=Object(i["d"])((function(){return o["b"](t)})),s=Object(i["u"])(null),f=Object(i["u"])(!0),d=Object(u["myReactive"])({state:Object(i["d"])((function(){return f.value?null==s.value?a.loading:a.saving:s.value==n.value?a.none:a.changed})),save:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return f.value=!0,s.value=n.value,t.next=4,l["b"](e.from(n.value,"utf8"));case 4:f.value=!1;case 5:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()});return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,c,u,d,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"]("money");case 2:n=e.sent,s.value=n&&n.toString("utf8"),o["a"](t,s.value),a=Object(r["a"])(t.transactions),e.prev=6,u=function(){var e=c.value;if(t.expenses.find((function(t){return t.transaction==e})))return"continue";t.expenses.push({transaction:e,tags:new Set,details:""})},a.s();case 9:if((c=a.n()).done){e.next=15;break}if(d=u(),"continue"!==d){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](6),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:for(b=0;b<t.expenses.length;++b)t.expenses[b].tags=Object(i["t"])(t.expenses[b].tags),t.expenses[b]=Object(i["t"])(t.expenses[b]);f.value=!1;case 25:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})))(),d}(function(e){e[e["none"]=0]="none",e[e["loading"]=1]="loading",e[e["changed"]=2]="changed",e[e["saving"]=3]="saving"})(a||(a={}))}).call(this,n("ce44").Buffer)},bd5c:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));var a=n("755f"),r=n("e82c"),c=(n("68e1"),n("9588"),n("966c"),n("241c"),n("46c3"),n("5a85"),n("534d"),n("88f6"),n("932a"),n("9a81")),i=["version"];function u(e,t){var n,a,c;(n=t.transactions).push.apply(n,Object(r["a"])(e.transactions)),(a=t.tags).push.apply(a,Object(r["a"])(e.tags));var i=e.expenses.map((function(n){return{details:e.labels[n.label].details,tags:new Set(e.labels[n.label].tags.map((function(e){return t.tags[e]}))),transaction:t.transactions[n.transaction]}})).filter((function(e){return Object(r["a"])(e.tags).every((function(e){return e}))&&e.transaction})).sort((function(e,n){return t.transactions.indexOf(n.transaction)-t.transactions.indexOf(e.transaction)}));(c=t.expenses).push.apply(c,Object(r["a"])(i))}function l(e,t){var n,a,c;(n=t.transactions).push.apply(n,Object(r["a"])(e.transactions)),(a=t.tags).push.apply(a,Object(r["a"])(e.tags));var i=e.expenses.map((function(e){return{details:e.details,tags:new Set(e.tags.map((function(e){return t.tags[e]}))),transaction:t.transactions[e.transaction]}})).filter((function(e){return Object(r["a"])(e.tags).every((function(e){return e}))&&e.transaction})).sort((function(e,n){return t.transactions.indexOf(n.transaction)-t.transactions.indexOf(e.transaction)}));(c=t.expenses).push.apply(c,Object(r["a"])(i)),t.transactions.reverse()}function o(e,t){var n,a,c;(n=t.transactions).push.apply(n,Object(r["a"])(e.transactions)),(a=t.tags).push.apply(a,Object(r["a"])(e.tags));var i=e.expenses.map((function(e){return{details:e.details,tags:new Set(e.tags.map((function(e){return t.tags[e]}))),transaction:t.transactions[e.transaction]}})).filter((function(e){return Object(r["a"])(e.tags).every((function(e){return e}))&&e.transaction})).sort((function(e,n){return t.transactions.indexOf(e.transaction)-t.transactions.indexOf(n.transaction)}));(c=t.expenses).push.apply(c,Object(r["a"])(i))}function s(e,t){if(null!=t){var n=JSON.parse(t),r=n.version,s=Object(a["a"])(n,i);if(2===r)return o(s,e);if(1===r)return l(s,e);if(void 0===r)return u(s,e);Object(c["a"])(!1,"invalid version: ".concat(r))}}function f(e){var t=2,n=e.transactions.map((function(e){return{date:e.date,value:e.value,description:e.description,category:e.category,balance:e.balance}})),a=e.tags.map((function(e){return{value:e.value}})),c=e.expenses.map((function(t){return{transaction:e.transactions.indexOf(t.transaction),tags:Object(r["a"])(t.tags).map((function(t){return e.tags.indexOf(t)})),details:t.details}}));return JSON.stringify({transactions:n,tags:a,expenses:c,version:t},void 0,"  ")}},cd49:function(e,t,n){"use strict";n.r(t),n.d(t,"myReactive",(function(){return se}));n("fd85"),n("15db"),n("c026"),n("4031");var a=n("79c4"),r=n("5a0f"),c=n("e82c"),i=(n("9588"),Object(a["C"])("data-v-abead1dc"));Object(a["o"])("data-v-abead1dc");var u=Object(a["h"])(" save "),l=Object(a["h"])(" import "),o=Object(a["i"])("span",{class:"ml-3"},null,-1),s={style:{height:"100%","overflow-y":"scroll"}},f=Object(a["i"])("span",{class:"mr-3"},null,-1),d=Object(a["h"])("clear selection"),b=Object(a["h"])(" Tags "),j=Object(a["h"])(" Months "),O=Object(a["h"])(" Days ");Object(a["m"])();var p=i((function(e,t,n,r,p,v){var g=Object(a["r"])("tag-index"),m=Object(a["r"])("v-card"),h=Object(a["r"])("v-button"),y=Object(a["r"])("v-flex"),x=Object(a["r"])("money"),w=Object(a["r"])("filter-editor"),_=Object(a["r"])("expense"),k=Object(a["r"])("v-text-field"),C=Object(a["r"])("v-app");return Object(a["l"])(),Object(a["f"])(C,null,{default:i((function(){return[Object(a["i"])(y,{grow:"",class:"pa-2",style:{height:"100%"}},{default:i((function(){return[Object(a["i"])(y,{column:"",class:"mr-2"},{default:i((function(){return[Object(a["i"])(m,{style:{"max-height":"100%",overflow:"hidden"}},{default:i((function(){return[Object(a["i"])(g,{editing:r.editing},null,8,["editing"])]})),_:1}),Object(a["i"])(y,null,{default:i((function(){return[Object(a["i"])(h,{disabled:!r.canSave,color:"primary",class:"mt-2",onClick:t[1]||(t[1]=function(e){return r.storage.save()})},{default:i((function(){return[u]})),_:1},8,["disabled"]),Object(a["i"])(h,{color:"primary",class:"mt-2 ml-2",onClick:t[2]||(t[2]=function(e){return r.imports.doImport()})},{default:i((function(){return[l]})),_:1})]})),_:1})]})),_:1}),Object(a["i"])(y,{column:""},{default:i((function(){return[Object(a["i"])(m,{grow:"",style:{overflow:"hidden"}},{default:i((function(){return[Object(a["i"])(y,{class:"pa-2","align-center":""},{default:i((function(){return[Object(a["i"])("span",null,[Object(a["h"])(Object(a["v"])(r.filter.result.length)+" Transactions, ",1),Object(a["i"])(x,{value:{cents:r.filter.result.reduce((function(e,t){return e+t.transaction.value.cents}),0)}},null,8,["value"])]),o,Object(a["i"])(w,{filter:r.filter},null,8,["filter"])]})),_:1}),Object(a["i"])("div",s,[Object(a["i"])(y,{column:""},{default:i((function(){return[(Object(a["l"])(!0),Object(a["f"])(a["a"],null,Object(a["p"])(r.sorted,(function(e){return Object(a["l"])(),Object(a["f"])(_,{key:e,expense:e,editing:r.editing},null,8,["expense","editing"])})),128))]})),_:1})]),r.editing.size>0?(Object(a["l"])(),Object(a["f"])(y,{key:0,class:"pa-2","align-center":""},{default:i((function(){return[Object(a["i"])("span",null,[Object(a["h"])(Object(a["v"])(r.editing.size)+" selected, ",1),Object(a["i"])(x,{value:{cents:Object(c["a"])(r.editing).reduce((function(e,t){return e+t.transaction.value.cents}),0)}},null,8,["value"])]),f,Object(a["i"])(h,{small:"",onClick:t[3]||(t[3]=function(e){return r.editing.clear()})},{default:i((function(){return[d]})),_:1}),Object(a["i"])(k,{class:"mt-0 ml-3",solo:"",modelValue:r.editingDetails,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.editingDetails=e}),ref:"editingDetailsTextField"},null,8,["modelValue"])]})),_:1})):Object(a["g"])("",!0)]})),_:1})]})),_:1}),Object(a["i"])(y,{grow:"",class:"ml-2"},{default:i((function(){return[Object(a["i"])(y,{grow:"",column:""},{default:i((function(){return[Object(a["i"])(y,null,{default:i((function(){return[Object(a["i"])(h,{small:"",color:"tag"==r.graph.type?"primary":"default",onClick:t[5]||(t[5]=function(e){return r.graph.type="tag"})},{default:i((function(){return[b]})),_:1},8,["color"]),Object(a["i"])(h,{small:"",class:"ml-2",color:"month"==r.graph.type?"primary":"default",onClick:t[6]||(t[6]=function(e){return r.graph.type="month"})},{default:i((function(){return[j]})),_:1},8,["color"]),Object(a["i"])(h,{small:"",class:"ml-2",color:"day"==r.graph.type?"primary":"default",onClick:t[7]||(t[7]=function(e){return r.graph.type="day"})},{default:i((function(){return[O]})),_:1},8,["color"])]})),_:1}),Object(a["i"])("canvas",{style:{flex:"1"},ref:function(e){return r.graph.canvas=e}},null,512)]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),v=n("57d2"),g=(n("241c"),n("46c3"),n("5a85"),n("534d"),{class:"mr-3"}),m=Object(a["h"])(" clear "),h=Object(a["h"])("add");function y(e,t,n,r,c,i){var u=Object(a["r"])("tag-index-entry"),l=Object(a["r"])("v-flex"),o=Object(a["r"])("v-button"),s=Object(a["r"])("v-text-field"),f=Object(a["r"])("v-icon");return Object(a["l"])(),Object(a["f"])(l,{column:"",style:{height:"100%",overflow:"hidden"}},{default:Object(a["z"])((function(){return[Object(a["i"])(l,{column:"",style:{"overflow-y":"scroll","overflow-x":"hidden"}},{default:Object(a["z"])((function(){return[(Object(a["l"])(!0),Object(a["f"])(a["a"],null,Object(a["p"])(r.tags,(function(e){return Object(a["l"])(),Object(a["f"])(u,{key:e,tag:e,editing:n.editing},null,8,["tag","editing"])})),128))]})),_:1}),r.filter.include.size>0||r.filter.exclude.size>0?(Object(a["l"])(),Object(a["f"])(l,{key:0,class:"pa-2","align-center":""},{default:Object(a["z"])((function(){return[Object(a["i"])("span",g,Object(a["v"])(r.filter.include.size+r.filter.exclude.size)+" selected ",1),Object(a["i"])(o,{small:"",onClick:t[1]||(t[1]=function(e){return r.filter.include.clear(),r.filter.exclude.clear()})},{default:Object(a["z"])((function(){return[m]})),_:1})]})),_:1})):Object(a["g"])("",!0),Object(a["i"])(l,{"align-center":"",class:"ma-2"},{default:Object(a["z"])((function(){return[Object(a["i"])(s,{modelValue:r.input,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.input=e}),onKeydown:t[3]||(t[3]=function(e){return 13==e.keyCode&&r.submit()}),class:"mt-0 mr-2"},null,8,["modelValue"]),Object(a["i"])(o,{icon:"",onClick:t[4]||(t[4]=function(e){return r.submit()})},{default:Object(a["z"])((function(){return[Object(a["i"])(f,null,{default:Object(a["z"])((function(){return[h]})),_:1})]})),_:1})]})),_:1})]})),_:1})}n("68e1");var x=Object(a["C"])("data-v-c3f5fc70");Object(a["o"])("data-v-c3f5fc70");var w=Object(a["h"])("delete"),_=Object(a["h"])("remove"),k=Object(a["h"])("add");Object(a["m"])();var C=x((function(e,t,n,r,c,i){var u=Object(a["r"])("v-text"),l=Object(a["r"])("v-button"),o=Object(a["r"])("v-flex"),s=Object(a["r"])("money"),f=Object(a["r"])("v-icon");return Object(a["l"])(),Object(a["f"])(o,{"align-center":"",class:"tag"},{default:x((function(){return[Object(a["i"])(o,null,{default:x((function(){return[Object(a["i"])(l,{text:"","x-small":"",onClick:t[1]||(t[1]=function(e){return r.toggle("include")}),onContextmenu:t[2]||(t[2]=Object(a["B"])((function(e){return r.toggle("exclude")}),["prevent"])),color:r.filter.include.has(n.tag)?"green":r.filter.exclude.has(n.tag)?"error":"default"},{default:x((function(){return[Object(a["i"])(u,null,{default:x((function(){return[Object(a["h"])(Object(a["v"])(n.tag.value),1)]})),_:1})]})),_:1},8,["color"])]})),_:1}),Object(a["i"])(o,{grow:""}),0!=r.total.cents?(Object(a["l"])(),Object(a["f"])(s,{key:0,value:r.currentTotal,class:"mr-1"},null,8,["value"])):(Object(a["l"])(),Object(a["f"])(l,{key:1,"x-small":"",icon:"",class:"mr-1 delete",onClick:t[3]||(t[3]=function(e){return r.del()})},{default:x((function(){return[Object(a["i"])(f,{color:"error"},{default:x((function(){return[w]})),_:1})]})),_:1})),n.editing.size>0?(Object(a["l"])(),Object(a["f"])(l,{key:2,"x-small":"",icon:"",class:"mr-1",onClick:t[4]||(t[4]=function(e){return r.toggleEdit()})},{default:x((function(){return[r.removeTag?(Object(a["l"])(),Object(a["f"])(f,{key:0},{default:x((function(){return[_]})),_:1})):(Object(a["l"])(),Object(a["f"])(f,{key:1},{default:x((function(){return[k]})),_:1}))]})),_:1})):Object(a["g"])("",!0)]})),_:1})}));n("5e5b");function S(e,t,n,r,c,i){return Object(a["l"])(),Object(a["f"])("span",null,Object(a["v"])(r.formatted),1)}var T=n("052e"),z={name:"money",props:{value:Object},setup:function(e){var t=Object(a["d"])((function(){return T["b"].save(e.value)||"$0"}));return{formatted:t}}};z.render=S;var R=z,D={name:"tag-list-entry",components:{Money:R},props:{tag:Object,editing:Object},setup:function(e){var t=Object(a["j"])("data"),n=Object(a["j"])("cache"),r=Object(a["j"])("filter"),i=Object(a["d"])((function(){return n.byTag(e.tag).total})),u=Object(a["d"])((function(){return n.byTagFiltered(e.tag).total})),l=Object(a["d"])((function(){return Object(c["a"])(e.editing).every((function(t){return t.tags.has(e.tag)}))}));return{total:i,currentTotal:u,filter:r,removeTag:l,toggleEdit:function(){var t,n=l.value,a=Object(v["a"])(e.editing);try{for(a.s();!(t=a.n()).done;){var r=t.value;n?r.tags.delete(e.tag):r.tags.add(e.tag)}}catch(c){a.e(c)}finally{a.f()}},toggle:function(t){r[t].has(e.tag)?r[t].delete(e.tag):r[t].add(e.tag)},del:function(){var n=t.tags.indexOf(e.tag);t.tags.splice(n,1)}}}};n("3bcc");D.render=C,D.__scopeId="data-v-c3f5fc70";var P=D,I={name:"tags",components:{TagIndexEntry:P},props:{editing:Object},setup:function(){var e=Object(a["u"])(""),t=Object(a["j"])("data"),n=Object(a["j"])("cache"),r=Object(a["j"])("filter"),i=Object(a["d"])((function(){return Object(c["a"])(t.tags).sort((function(e,t){var a=n.byTagFiltered(e).total,r=n.byTagFiltered(t).total;return a.cents!=r.cents?a.cents-r.cents:e.value.localeCompare(t.value)}))}));return{tags:i,input:e,filter:r,submit:function(){var n={value:e.value};t.tags.push(n),e.value=""}}}};I.render=y;var V=I,F=Object(a["C"])("data-v-3b8f6374");Object(a["o"])("data-v-3b8f6374");var M=Object(a["h"])(" Before "),U=Object(a["h"])(" After "),L=Object(a["i"])("span",null,"exact",-1);Object(a["m"])();var B=F((function(e,t,n,r,c,i){var u=Object(a["r"])("v-text-field"),l=Object(a["r"])("v-card"),o=Object(a["r"])("v-dialog"),s=Object(a["r"])("date"),f=Object(a["r"])("v-button"),d=Object(a["r"])("v-flex");return Object(a["l"])(),Object(a["f"])(a["a"],null,[Object(a["i"])(o,{modelValue:null!=r.editingDate,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.editingDate=null})},{default:F((function(){return[Object(a["i"])(l,{class:"pb-4"},{default:F((function(){return[Object(a["i"])(u,{modelValue:r.dateInput,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.dateInput=e}),ref:"dateTextField",label:"mm/dd/yyyy",onKeydown:t[2]||(t[2]=function(e){return 13==e.keyCode&&(r.editingDate=null)})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["modelValue"]),Object(a["i"])(d,null,{default:F((function(){return[Object(a["i"])(f,{"x-small":"",onClick:t[4]||(t[4]=function(e){return r.editDate("before")}),color:n.filter.before?"primary":"default"},{default:F((function(){return[Object(a["i"])("span",null,[M,n.filter.before?(Object(a["l"])(),Object(a["f"])(s,{key:0,value:n.filter.before},null,8,["value"])):Object(a["g"])("",!0)])]})),_:1},8,["color"]),Object(a["i"])(f,{"x-small":"",class:"ml-3",onClick:t[5]||(t[5]=function(e){return r.editDate("after")}),color:n.filter.after?"primary":"default"},{default:F((function(){return[Object(a["i"])("span",null,[U,n.filter.after?(Object(a["l"])(),Object(a["f"])(s,{key:0,value:n.filter.after},null,8,["value"])):Object(a["g"])("",!0)])]})),_:1},8,["color"]),Object(a["i"])(f,{"x-small":"",class:"ml-3",onClick:t[6]||(t[6]=function(e){return n.filter.exact=!n.filter.exact}),color:n.filter.exact?"primary":"default"},{default:F((function(){return[L]})),_:1},8,["color"])]})),_:1})],64)}));n("17db");function E(e,t,n,r,c,i){return Object(a["l"])(),Object(a["f"])("span",null,Object(a["v"])(r.formatted),1)}var A={name:"date",props:{value:Object},setup:function(e){var t=Object(a["d"])((function(){return T["a"].save(e.value)}));return{formatted:t}}};A.render=E;var J=A,q={name:"filter-editor",components:{date:J},props:{filter:Object},setup:function(e){var t=Object(a["u"])(null),n=Object(a["u"])(null),r=Object(a["u"])(null),c=Object(a["u"])(null);return Object(a["x"])(t,(function(t,a){if(null==t){try{var c=T["a"].load(n.value);e.filter[a]=c}catch(i){}n.value=""}else setImmediate((function(){r.value.focus()}))})),{dateInput:n,dateTextField:r,editingDate:t,exactCheckbox:c,editDate:function(n){null===e.filter[n]?t.value=n:e.filter[n]=null}}}};n("e72f");q.render=B,q.__scopeId="data-v-3b8f6374";var H=q,K=(n("88f6"),n("932a"),Object(a["C"])("data-v-6b00c97b"));Object(a["o"])("data-v-6b00c97b");var N={key:0},$={key:1,style:{"font-family":"Roboto Mono","font-size":"0.9em"}};Object(a["m"])();var G=K((function(e,t,n,r,c,i){var u=Object(a["r"])("date"),l=Object(a["r"])("v-flex"),o=Object(a["r"])("money"),s=Object(a["r"])("v-button"),f=Object(a["s"])("ripple");return Object(a["A"])((Object(a["l"])(),Object(a["f"])(l,{class:["expense py-1 px-2",{active:n.editing.has(n.expense)}],onClick:r.toggle},{default:K((function(){return[Object(a["i"])(l,{"justify-start":"","align-center":"",class:"date"},{default:K((function(){return[Object(a["i"])(u,{value:n.expense.transaction.date},null,8,["value"])]})),_:1}),Object(a["i"])(l,{"justify-end":"","align-center":"",class:"money"},{default:K((function(){return[Object(a["i"])(o,{value:n.expense.transaction.value},null,8,["value"])]})),_:1}),Object(a["i"])(l,{"justify-start":"","align-center":"",class:"tags px-2"},{default:K((function(){return[(Object(a["l"])(!0),Object(a["f"])(a["a"],null,Object(a["p"])(n.expense.tags,(function(e){return Object(a["l"])(),Object(a["f"])(s,{text:"","x-small":"",key:e},{default:K((function(){return[Object(a["h"])(Object(a["v"])(e.value),1)]})),_:2},1024)})),128))]})),_:1}),Object(a["i"])(l,{"justify-start":"","align-center":"",class:"description"},{default:K((function(){return[n.expense.details?(Object(a["l"])(),Object(a["f"])("span",N,Object(a["v"])(n.expense.details),1)):(Object(a["l"])(),Object(a["f"])("span",$,Object(a["v"])(n.expense.transaction.description),1))]})),_:1})]})),_:1},8,["class","onClick"])),[[f],[a["w"],r.visible]])})),Q=(n("32ec"),n("c35d"),{name:"expense",components:{Date:J,Money:R},props:{expense:Object,editing:Object},setup:function(e){var t=Object(a["j"])("data"),n=Object(a["j"])("filter"),r=Object(a["d"])((function(){return n.match(e.expense)}));return{filter:n,visible:r,toggle:function(){e.editing.has(e.expense)?e.editing.delete(e.expense):e.editing.add(e.expense)},del:function(){var n=t.expenses.indexOf(e.expense);t.expenses.splice(n,1)}}}});n("26de");Q.render=G,Q.__scopeId="data-v-6b00c97b";var W=Q,X=n("6bdf"),Y={name:"app",components:{TagIndex:V,FilterEditor:H,date:J,money:R,expense:W},setup:function(e){var t=Object(a["j"])("data"),n=Object(a["j"])("storage"),r=Object(a["j"])("filter"),i=Object(a["j"])("cache"),u=Object(a["j"])("graph"),l=Object(a["j"])("import"),o=Object(a["d"])((function(){return n.state==X["a"].changed})),s=Object(a["t"])(new Set),f=Object(a["d"])({get:function(){var e,t=new Set,n=Object(v["a"])(s);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.add(Object(a["t"])(r).details)}}catch(i){n.e(i)}finally{n.f()}return 1==t.size?Object(c["a"])(t)[0]:"<different values>"},set:function(e){var t,n=Object(v["a"])(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object(a["t"])(r).details=e}}catch(c){n.e(c)}finally{n.f()}}}),d=Object(a["u"])(null),b=Object(a["d"])((function(){return Object(c["a"])(t.expenses).reverse()}));return Object(a["x"])(s,(function(){setTimeout((function(){var e;null===(e=d.value)||void 0===e||e.focus()}),0)})),{data:t,cache:i,filter:r,storage:n,graph:u,canSave:o,editing:s,editingDetails:f,editingDetailsTextField:d,sorted:b,imports:l}}};n("5073"),n("335b");Y.render=p,Y.__scopeId="data-v-abead1dc";var Z=Y;function ee(e){var t=se({exact:!1,include:Object(a["t"])(new Set),exclude:Object(a["t"])(new Set),before:null,after:null,match:function(e){return Object(c["a"])(t.include).every((function(t){return e.tags.has(t)}))&&Object(c["a"])(t.exclude).every((function(t){return!e.tags.has(t)}))&&(!t.exact||e.tags.size==t.include.size)&&(null==t.before||T["a"].lt(e.transaction.date,t.before)||T["a"].eq(e.transaction.date,t.before))&&(null==t.after||T["a"].lt(t.after,e.transaction.date)||T["a"].eq(t.after,e.transaction.date))},result:Object(a["d"])((function(){return e.expenses.filter((function(e){return t.match(e)}))}))});return t}n("d50c");function te(e,t){var n=Object(a["d"])((function(){var t,n=new Map,a=Object(v["a"])(e.expenses);try{for(a.s();!(t=a.n()).done;){var r,c=t.value,i=Object(v["a"])(c.tags);try{for(i.s();!(r=i.n()).done;){var u=r.value,l=n.get(u);l||n.set(u,l={total:{cents:0}}),l.total.cents+=c.transaction.value.cents}}catch(o){i.e(o)}finally{i.f()}}}catch(o){a.e(o)}finally{a.f()}return n})),r=Object(a["d"])((function(){var e,n=new Map,a=Object(v["a"])(t.result);try{for(a.s();!(e=a.n()).done;){var r,c=e.value,i=Object(v["a"])(c.tags);try{for(i.s();!(r=i.n()).done;){var u=r.value,l=n.get(u);l||n.set(u,l={total:{cents:0}}),l.total.cents+=c.transaction.value.cents}}catch(o){i.e(o)}finally{i.f()}}}catch(o){a.e(o)}finally{a.f()}return n}));return{byTag:function(e){var t;return null!==(t=n.value.get(e))&&void 0!==t?t:{total:{cents:0}}},byTagFiltered:function(e){var t;return null!==(t=r.value.get(e))&&void 0!==t?t:{total:{cents:0}}}}}var ne=n("68d6"),ae=(n("966c"),n("efac")),re=n("9a81");function ce(e,t,n){var r,i=se({type:"tag",canvas:null});return Object(a["y"])(u,{flush:"post"}),window.addEventListener("resize",u),i;function u(){var a;if(null===(a=r)||void 0===a||a.destroy(),i.canvas&&i.type){var u=i.canvas.getBoundingClientRect(),l=i.canvas.getContext("2d");if(Object(re["a"])(null!=l,"context"),"tag"==i.type){var o=e.tags.filter((function(e){return!t.include.has(e)})).map((function(e){return[e,n.byTagFiltered(e)]})).filter((function(e){var t=Object(ne["a"])(e,2),n=(t[0],t[1]);return 0!=n.total.cents})).map((function(e){var t=Object(ne["a"])(e,2),n=t[0],a=t[1];return[n.value,a.total.cents/100]})).sort((function(e,t){return e[1]-t[1]})),s=o.map((function(e){return e[0]})),f=o.map((function(e){return e[1]}));r=new ae["a"](l,{type:"bar",data:{labels:s,datasets:[{label:"money",data:f,backgroundColor:["#1a9850"]}]},options:{aspectRatio:u.width/u.height,indexAxis:"y"}})}else{var d,b=new Map,j=Object(v["a"])(t.result);try{for(j.s();!(d=j.n()).done;){var O=d.value,p="day"==i.type?new Date(O.transaction.date.year,O.transaction.date.month-1,O.transaction.date.day):new Date(O.transaction.date.year,O.transaction.date.month-1),g=p.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"day"==i.type?"numeric":void 0}),m=b.get(g);m||b.set(g,m={date:p,value:0}),m.value+=O.transaction.value.cents}}catch(w){j.e(w)}finally{j.f()}var h=Object(c["a"])(b).sort((function(e,t){return e[1].date.valueOf()-t[1].date.valueOf()})),y=h.map((function(e){return e[0]})),x=h.map((function(e){return e[1].value/100}));r=new ae["a"](l,{type:"bar",data:{labels:y,datasets:[{label:"money",data:x,backgroundColor:["#1a9850"]}]},options:{aspectRatio:u.width/u.height,indexAxis:"y"}})}}}}ae["a"].register.apply(ae["a"],Object(c["a"])(ae["b"]));var ie=n("7a28"),ue=(n("c1c3"),n("156c"),n("581e"),n("c9e3")),le=n.n(ue);function oe(e){return{doImport:function(){return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n,r,i,u,l,o,s,f,d,b,j,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.showOpenFilePicker({types:[{description:"CSV",accept:{"text/csv":[".csv"]}}]});case 2:return i=t.sent,u=Object(ne["a"])(i,1),l=u[0],t.next=7,l.getFile();case 7:return o=t.sent,t.next=10,o.text();case 10:s=t.sent,f=le()(s,{from_line:2}),d=f.map((function(e){return T["c"].load(e)})),d.reverse(),b=e.transactions[e.transactions.length-1],j=null!=b?d.findIndex((function(e){return T["c"].eq(b,e)}))+1:0,O=d.slice(j),(n=e.transactions).push.apply(n,Object(c["a"])(O)),(r=e.expenses).push.apply(r,Object(c["a"])(O.map((function(e){return Object(a["t"])({transaction:e,tags:Object(a["t"])(new Set),details:""})}))));case 19:case"end":return t.stop()}}),t)})))()}}}function se(e){return Object(a["t"])(Object(a["n"])(e))}var fe={tags:Object(a["t"])([]),expenses:Object(a["t"])([]),transactions:Object(a["t"])([])},de=Object(X["b"])(fe),be=ee(fe),je=te(fe,be),Oe=ce(fe,be,je),pe=oe(fe),ve=Object(a["e"])(Z);ve.use(r["a"]),ve.provide("data",fe),ve.provide("storage",de),ve.provide("filter",be),ve.provide("cache",je),ve.provide("graph",Oe),ve.provide("import",pe),ve.mount("#app"),window.addEventListener("beforeunload",(function(e){de.state!=X["a"].changed&&de.state!=X["a"].saving||(e.preventDefault(),e.returnValue="")}))},cfe9:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a,r=n("2752"),c=n("7a28"),i=(n("c1c3"),n("241c"),n("5a85"),n("534d"),n("f432"),n("f542"),n("0ffc"),n("9a81")),u=n("376b"),l="70e7cbe421d5790c41b0";function o(e){return{hook:function(t,n){return n.headers["authorization"]="Bearer ".concat(e.access_token),t(n)}}}function s(e){return f.apply(this,arguments)}function f(){return f=Object(c["a"])(regeneratorRuntime.mark((function t(n){var c,s,f,d,b,j,O,p,v,g,m,h,y,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(i["a"])(void 0===a,"re-init"),c=new URL(location.href),s=c.searchParams.get("code"),null==s){t.next=40;break}return f=localStorage.getItem("mfro:debug-redirect"),f&&(d=new URL(f),d.searchParams.set("code",s),location.assign(d.toString()),Object(i["a"])(!1,"location.assign")),c.searchParams.delete("code"),history.replaceState(null,document.title,c.toString()),b=new URL("https://api.mfro.me/github-auth-proxy/login/oauth/access_token"),b.searchParams.set("code",s),b.searchParams.set("client_id",l),t.next=13,fetch(b.toString(),{method:"POST",headers:{accept:"application/vnd.github.v3+json"}});case 13:return j=t.sent,t.next=16,j.json();case 16:return O=t.sent,p=new u["a"]({auth:O,authStrategy:o}),t.next=20,p.users.getAuthenticated();case 20:return v=t.sent,g=v.data,t.prev=22,t.next=25,p.repos.getContent({owner:g.login,repo:"mfro-backend",path:n});case 25:y=t.sent,Object(i["a"])("object"==Object(r["a"])(y.data),"test"),Object(i["a"])("content"in y.data,"test"),m=e.from(y.data.content,"base64"),h=y.data.sha,t.next=36;break;case 32:t.prev=32,t.t0=t["catch"](22),m=null,h=null;case 36:return a={api:p,auth:O,user:g,filePath:n,fileHash:h},t.abrupt("return",m);case 40:x=new URL("https://github.com/login/oauth/authorize"),x.searchParams.set("scope","repo read:user user:email"),x.searchParams.set("client_id",l),location.assign(x.toString()),Object(i["a"])(!1,"location.assign");case 45:case"end":return t.stop()}}),t,null,[[22,32]])}))),f.apply(this,arguments)}function d(e){return b.apply(this,arguments)}function b(){return b=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r,c,u,l,o,s,f,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(i["a"])(void 0!==a,"not init"),c=a,u=c.api,l=c.user,o=c.filePath,s=c.fileHash,e.next=4,u.repos.createOrUpdateFileContents({owner:l.login,repo:"mfro-backend",path:o,message:"update ".concat(o),content:t.toString("base64"),sha:null!==s&&void 0!==s?s:void 0,author:{name:"mfro github backend",email:"backend@mfro.me"},committer:{name:l.name,email:l.email}});case 4:f=e.sent,d=f.data,a.fileHash=null!==(n=null===(r=d.content)||void 0===r?void 0:r.sha)&&void 0!==n?n:null;case 7:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}}).call(this,n("ce44").Buffer)},e72f:function(e,t,n){"use strict";n("1cde")},f9a0:function(e,t,n){},ff4a:function(e,t,n){}});
//# sourceMappingURL=index.21c4cb92.js.map