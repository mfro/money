{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ui/expense.vue?dc16","webpack:///./src/main.vue?5556","webpack:///./src/ui/tag-index/tag-index-entry.vue?a81d","webpack:///./src/main.vue?4f47","webpack:///./src/modules/storage/index.ts","webpack:///./src/modules/storage/serialization.ts","webpack:///./src/main.vue","webpack:///./src/ui/tag-index/index.vue","webpack:///./src/ui/tag-index/tag-index-entry.vue","webpack:///./src/ui/money.vue","webpack:///./src/ui/money.vue?7c5e","webpack:///./src/ui/tag-index/tag-index-entry.vue?935d","webpack:///./src/ui/tag-index/index.vue?c429","webpack:///./src/ui/filter-editor/index.vue","webpack:///./src/ui/date.vue","webpack:///./src/ui/date.vue?b99f","webpack:///./src/ui/filter-editor/index.vue?b0c3","webpack:///./src/ui/expense.vue","webpack:///./src/ui/expense.vue?512f","webpack:///./src/main.vue?6697","webpack:///./src/modules/filter.ts","webpack:///./src/modules/cache.ts","webpack:///./src/modules/graph.ts","webpack:///./src/modules/import.ts","webpack:///./src/main.ts","webpack:///./src/modules/storage/github.ts","webpack:///./src/ui/filter-editor/index.vue?e4dd"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","StorageState","initStorage","json","content","loading","storage","state","saving","none","changed","save","Buffer","from","raw","toString","transactions","expenses","find","e","transaction","tags","Set","details","loadV0","src","map","labels","label","filter","every","sort","a","b","indexOf","loadV1","reverse","loadV2","load","JSON","parse","version","undefined","date","description","category","balance","stringify","class","style","grow","column","editing","disabled","canSave","color","imports","doImport","align-center","sorted","expense","size","small","clear","solo","editingDetails","ref","graph","type","canvas","tag","include","exclude","input","$event","keyCode","submit","icon","text","x-small","toggle","total","cents","currentTotal","del","toggleEdit","removeTag","formatted","props","setup","render","components","Money","cache","byTag","byTagFiltered","has","removing","delete","add","index","__scopeId","TagIndexEntry","aTotal","bTotal","localeCompare","modelValue","editingDate","dateInput","editDate","before","after","exact","dateTextField","exactCheckbox","v","old","setImmediate","focus","justify-start","justify-end","visible","Date","match","TagIndex","FilterEditor","money","set","editingDetailsTextField","setTimeout","initFilter","myReactive","lt","eq","initCache","Map","entry","initGraph","chart","flush","addEventListener","destroy","bounds","getBoundingClientRect","context","getContext","assert","info","values","datasets","backgroundColor","options","aspectRatio","width","height","indexAxis","months","year","month","day","toLocaleDateString","valueOf","register","initImport","showOpenFilePicker","types","accept","file","getFile","fileData","fileText","rows","from_line","loaded","row","mostRecent","findIndex","newTransactions","arg","app","use","provide","mount","preventDefault","returnValue","clientId","authStrategy","auth","hook","request","headers","access_token","filePath","currentUrl","URL","location","href","code","searchParams","redirect","localStorage","getItem","assign","history","replaceState","document","title","url","fetch","method","authRsp","api","users","getAuthenticated","user","repos","getContent","owner","login","repo","path","existing","fileHash","sha","createOrUpdateFileContents","message","author","email","committer"],"mappings":"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","file":"js/index.21c4cb92.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./expense.vue?vue&type=style&index=0&id=6b00c97b&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./main.vue?vue&type=style&index=1&id=abead1dc&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./tag-index-entry.vue?vue&type=style&index=0&id=c3f5fc70&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./main.vue?vue&type=style&index=0&id=abead1dc&lang=scss\"","import { Data } from 'common';\nimport { computed, shallowReactive, shallowRef } from 'vue';\n\nimport { myReactive } from '@/main';\n\nimport * as github from './github';\nimport * as serialization from './serialization';\n\nexport enum StorageState {\n  none,\n  loading,\n  changed,\n  saving,\n}\n\nexport interface Storage {\n  state: StorageState;\n  save(): Promise<void>;\n}\n\nexport function initStorage(data: Data) {\n  const json = computed(() => serialization.save(data));\n  const content = shallowRef(null as null | string);\n  const loading = shallowRef(true);\n\n  const storage: Storage = myReactive({\n    state: computed(() =>\n      loading.value\n        ? content.value == null\n          ? StorageState.loading\n          : StorageState.saving\n        : content.value == json.value\n          ? StorageState.none\n          : StorageState.changed\n    ),\n    save: async () => {\n      loading.value = true;\n\n      content.value = json.value;\n      await github.save(Buffer.from(json.value, 'utf8'));\n\n      loading.value = false;\n    },\n  });\n\n  (async () => {\n    const raw = await github.load('money');\n    content.value = raw && raw.toString('utf8');\n\n    serialization.load(data, content.value);\n\n    for (const t of data.transactions) {\n      if (data.expenses.find(e => e.transaction == t)) continue;\n      data.expenses.push({ transaction: t, tags: new Set(), details: '' });\n    }\n\n    for (let i = 0; i < data.expenses.length; ++i) {\n      data.expenses[i].tags = shallowReactive(data.expenses[i].tags);\n      data.expenses[i] = shallowReactive(data.expenses[i]);\n    }\n\n    loading.value = false;\n  })();\n\n  return storage;\n}\n","import { assert } from '@mfro/ts-common/assert';\nimport { Data, Tag, Transaction } from 'common';\n\ninterface V0 {\n  transactions: Transaction[];\n  tags: Tag[];\n  labels: { details: string, tags: number[] }[];\n  expenses: { transaction: number, label: number }[];\n}\n\nfunction loadV0(src: V0, data: Data) {\n  data.transactions.push(...src.transactions);\n  data.tags.push(...src.tags);\n\n  const expenses = src.expenses.map(e => ({\n    details: src.labels[e.label].details,\n    tags: new Set(src.labels[e.label].tags.map(i => data.tags[i])),\n    transaction: data.transactions[e.transaction],\n  })).filter(e =>\n    [...e.tags].every(t => t) && e.transaction\n  ).sort((a, b) =>\n    data.transactions.indexOf(b.transaction) - data.transactions.indexOf(a.transaction)\n  );\n\n  data.expenses.push(...expenses);\n}\n\ninterface V1 {\n  transactions: Transaction[];\n  tags: Tag[];\n  expenses: { transaction: number, tags: number[], details: string }[];\n}\n\nfunction loadV1(src: V1, data: Data) {\n  data.transactions.push(...src.transactions);\n  data.tags.push(...src.tags);\n\n  const expenses = src.expenses.map(e => ({\n    details: e.details,\n    tags: new Set(e.tags.map(i => data.tags[i])),\n    transaction: data.transactions[e.transaction],\n  })).filter(e =>\n    [...e.tags].every(t => t) && e.transaction\n  ).sort((a, b) =>\n    data.transactions.indexOf(b.transaction) - data.transactions.indexOf(a.transaction)\n  );\n\n  data.expenses.push(...expenses);\n  data.transactions.reverse();\n}\n\ninterface V2 {\n  transactions: Transaction[];\n  tags: Tag[];\n  expenses: { transaction: number, tags: number[], details: string }[];\n}\n\nfunction loadV2(src: V2, data: Data) {\n  data.transactions.push(...src.transactions);\n  data.tags.push(...src.tags);\n\n  const expenses = src.expenses.map(e => ({\n    details: e.details,\n    tags: new Set(e.tags.map(i => data.tags[i])),\n    transaction: data.transactions[e.transaction],\n  })).filter(e =>\n    [...e.tags].every(t => t) && e.transaction\n  ).sort((a, b) =>\n    data.transactions.indexOf(a.transaction) - data.transactions.indexOf(b.transaction)\n  );\n\n  data.expenses.push(...expenses);\n}\n\nexport function load(data: Data, raw: string | null) {\n  if (raw != null) {\n    const { version, ...src } = JSON.parse(raw);\n\n    if (version === 2) return loadV2(src, data);\n    if (version === 1) return loadV1(src, data);\n    if (version === undefined) return loadV0(src, data);\n\n    assert(false, `invalid version: ${version}`);\n  }\n}\n\nexport function save(data: Data) {\n  const version = 2;\n\n  const transactions = data.transactions.map(t => ({\n    date: t.date,\n    value: t.value,\n    description: t.description,\n    category: t.category,\n    balance: t.balance,\n  }));\n\n  const tags = data.tags.map(t => ({\n    value: t.value,\n  }));\n\n  const expenses = data.expenses.map(e => ({\n    transaction: data.transactions.indexOf(e.transaction),\n    tags: [...e.tags].map(t => data.tags.indexOf(t)),\n    details: e.details,\n  }));\n\n  return JSON.stringify({ transactions, tags, expenses, version }, undefined, '  ');\n}\n","<template>\n  <v-app>\n    <v-flex grow class=\"pa-2\" style=\"height: 100%\">\n      <v-flex column class=\"mr-2\">\n        <v-card style=\"max-height: 100%; overflow: hidden\">\n          <tag-index :editing=\"editing\" />\n        </v-card>\n\n        <v-flex>\n          <v-button\n            :disabled=\"!canSave\"\n            color=\"primary\"\n            class=\"mt-2\"\n            @click=\"storage.save()\"\n          >\n            save\n          </v-button>\n\n          <v-button\n            color=\"primary\"\n            class=\"mt-2 ml-2\"\n            @click=\"imports.doImport()\"\n          >\n            import\n          </v-button>\n        </v-flex>\n      </v-flex>\n\n      <v-flex column>\n        <v-card grow style=\"overflow: hidden\">\n          <v-flex class=\"pa-2\" align-center>\n            <span>\n              {{ filter.result.length }} Transactions,\n              <money\n                :value=\"{\n                  cents: filter.result.reduce(\n                    (sum, e) => sum + e.transaction.value.cents,\n                    0\n                  ),\n                }\"\n              />\n            </span>\n\n            <span class=\"ml-3\" />\n\n            <filter-editor :filter=\"filter\" />\n          </v-flex>\n\n          <div style=\"height: 100%; overflow-y: scroll\">\n            <v-flex column>\n              <expense\n                v-for=\"expense in sorted\"\n                :key=\"expense\"\n                :expense=\"expense\"\n                :editing=\"editing\"\n              />\n            </v-flex>\n          </div>\n\n          <v-flex class=\"pa-2\" v-if=\"editing.size > 0\" align-center>\n            <span>\n              {{ editing.size }} selected,\n              <money\n                :value=\"{\n                  cents: [...editing].reduce(\n                    (sum, e) => sum + e.transaction.value.cents,\n                    0\n                  ),\n                }\"\n              />\n            </span>\n\n            <span class=\"mr-3\" />\n\n            <v-button small @click=\"editing.clear()\">clear selection</v-button>\n\n            <v-text-field\n              class=\"mt-0 ml-3\"\n              solo\n              v-model=\"editingDetails\"\n              ref=\"editingDetailsTextField\"\n            />\n          </v-flex>\n        </v-card>\n      </v-flex>\n\n      <v-flex grow class=\"ml-2\">\n        <v-flex grow column>\n          <v-flex>\n            <v-button\n              small\n              :color=\"graph.type == 'tag' ? 'primary' : 'default'\"\n              @click=\"graph.type = 'tag'\"\n            >\n              Tags\n            </v-button>\n\n            <v-button\n              small\n              class=\"ml-2\"\n              :color=\"graph.type == 'month' ? 'primary' : 'default'\"\n              @click=\"graph.type = 'month'\"\n            >\n              Months\n            </v-button>\n\n            <v-button\n              small\n              class=\"ml-2\"\n              :color=\"graph.type == 'day' ? 'primary' : 'default'\"\n              @click=\"graph.type = 'day'\"\n            >\n              Days\n            </v-button>\n          </v-flex>\n\n          <canvas style=\"flex: 1\" :ref=\"(e) => (graph.canvas = e)\" />\n        </v-flex>\n      </v-flex>\n    </v-flex>\n    <!-- <input type=\"file\" @input=\"onInput\" /> -->\n  </v-app>\n</template>\n\n<script>\nimport { computed, inject, shallowReactive, shallowRef, watch } from 'vue';\n\nimport TagIndex from './ui/tag-index';\nimport FilterEditor from './ui/filter-editor';\nimport date from './ui/date';\nimport money from './ui/money';\nimport expense from './ui/expense';\n\nimport { StorageState } from './modules/storage';\n\nexport default {\n  name: 'app',\n  components: {\n    TagIndex,\n    FilterEditor,\n    date,\n    money,\n    expense,\n  },\n\n  setup(props) {\n    const data = inject('data');\n    const storage = inject('storage');\n    const filter = inject('filter');\n    const cache = inject('cache');\n    const graph = inject('graph');\n    const imports = inject('import');\n\n    const canSave = computed(() => {\n      return storage.state == StorageState.changed;\n    });\n\n    const editing = shallowReactive(new Set);\n\n    const editingDetails = computed({\n      get() {\n        const set = new Set();\n        for (const e of editing) {\n          set.add(shallowReactive(e).details);\n        }\n\n        if (set.size == 1) {\n          return [...set][0];\n        }\n\n        return '<different values>';\n      },\n\n      set(v) {\n        for (const e of editing) {\n          shallowReactive(e).details = v;\n        }\n      },\n    })\n\n    const editingDetailsTextField = shallowRef(null);\n\n    const sorted = computed(() => {\n      return [...data.expenses].reverse()\n      // .filter((e) => filter.match(e));\n    });\n\n    watch(editing, () => {\n      setTimeout(() => {\n        editingDetailsTextField.value?.focus();\n      }, 0);\n    });\n\n    return {\n      data, cache, filter, storage, graph,\n      canSave,\n      editing, editingDetails, editingDetailsTextField,\n      sorted,\n      imports,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#app {\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.container {\n  width: 145vh;\n}\n</style>\n","<template>\n  <v-flex column style=\"height: 100%; overflow: hidden\">\n    <v-flex column style=\"overflow-y: scroll;overflow-x: hidden;\">\n      <tag-index-entry\n        v-for=\"tag in tags\"\n        :key=\"tag\"\n        :tag=\"tag\"\n        :editing=\"editing\"\n      />\n    </v-flex>\n\n    <v-flex\n      class=\"pa-2\"\n      v-if=\"filter.include.size > 0 || filter.exclude.size > 0\"\n      align-center\n    >\n      <span class=\"mr-3\">\n        {{ filter.include.size + filter.exclude.size }} selected\n      </span>\n\n      <v-button small @click=\"filter.include.clear(), filter.exclude.clear()\">\n        clear\n      </v-button>\n    </v-flex>\n\n    <v-flex align-center class=\"ma-2\">\n      <v-text-field\n        v-model=\"input\"\n        @keydown=\"$event.keyCode == 13 && submit()\"\n        class=\"mt-0 mr-2\"\n      />\n\n      <v-button icon @click=\"submit()\">\n        <v-icon>add</v-icon>\n      </v-button>\n    </v-flex>\n  </v-flex>\n</template>\n\n<script>\nimport { computed, inject, shallowReactive, shallowRef } from 'vue';\n\nimport TagIndexEntry from './tag-index-entry';\n\nexport default {\n  name: 'tags',\n  components: {\n    TagIndexEntry,\n  },\n\n  props: {\n    editing: Object,\n  },\n\n  setup() {\n    const input = shallowRef('');\n\n    const data = inject('data');\n    const cache = inject('cache');\n    const filter = inject('filter');\n\n    const tags = computed(() => {\n      return [...data.tags].sort((a, b) => {\n        const aTotal = cache.byTagFiltered(a).total;\n        const bTotal = cache.byTagFiltered(b).total;\n\n        if (aTotal.cents != bTotal.cents)\n          return aTotal.cents - bTotal.cents;\n\n        return a.value.localeCompare(b.value);\n      });\n    });\n\n    return {\n      tags,\n      input,\n      filter,\n\n      submit() {\n        const tag = { value: input.value };\n        data.tags.push(tag);\n\n        input.value = '';\n      },\n    };\n  },\n};\n</script>\n","<template>\n  <v-flex align-center class=\"tag\">\n    <v-flex>\n      <v-button\n        text\n        x-small\n        @click=\"toggle('include')\"\n        @contextmenu.prevent=\"toggle('exclude')\"\n        :color=\"\n          filter.include.has(tag)\n            ? 'green'\n            : filter.exclude.has(tag)\n            ? 'error'\n            : 'default'\n        \"\n      >\n        <v-text>{{ tag.value }}</v-text>\n      </v-button>\n    </v-flex>\n\n    <v-flex grow />\n\n    <template v-if=\"total.cents != 0\">\n      <money :value=\"currentTotal\" class=\"mr-1\" />\n    </template>\n\n    <template v-else>\n      <v-button x-small icon class=\"mr-1 delete\" @click=\"del()\">\n        <v-icon color=\"error\">delete</v-icon>\n      </v-button>\n    </template>\n\n    <template v-if=\"editing.size > 0\">\n      <v-button x-small icon class=\"mr-1\" @click=\"toggleEdit()\">\n        <v-icon v-if=\"removeTag\">remove</v-icon>\n        <v-icon v-else>add</v-icon>\n      </v-button>\n    </template>\n  </v-flex>\n</template>\n\n<script>\nimport { computed, inject, shallowReactive, shallowRef } from 'vue';\n\nimport Money from '../money';\n\nexport default {\n  name: 'tag-list-entry',\n  components: {\n    Money,\n  },\n\n  props: {\n    tag: Object,\n    editing: Object,\n  },\n\n  setup(props) {\n    const data = inject('data');\n    const cache = inject('cache');\n    const filter = inject('filter');\n\n    const total = computed(() => {\n      return cache.byTag(props.tag).total;\n    });\n\n    const currentTotal = computed(() => {\n      return cache.byTagFiltered(props.tag).total;\n    });\n\n    const removeTag = computed(() => {\n      return [...props.editing].every((e) => e.tags.has(props.tag))\n    });\n\n    return {\n      total,\n      currentTotal,\n\n      filter,\n      removeTag,\n\n      toggleEdit() {\n        const removing = removeTag.value;\n        for (const expense of props.editing) {\n          if (removing) expense.tags.delete(props.tag);\n          else expense.tags.add(props.tag);\n        }\n      },\n\n      toggle(key) {\n        if (filter[key].has(props.tag))\n          filter[key].delete(props.tag);\n        else\n          filter[key].add(props.tag);\n      },\n\n      del() {\n        const index = data.tags.indexOf(props.tag);\n        data.tags.splice(index, 1);\n      },\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tag {\n  .delete {\n    opacity: 0;\n    transition: opacity 80ms;\n  }\n\n  &:hover .delete {\n    opacity: 1;\n  }\n}\n</style>\n","<template>\n  <span>{{ formatted }}</span>\n</template>\n\n<script>\nimport { computed } from 'vue';\n\nimport { Money } from 'common';\n\nexport default {\n  name: 'money',\n\n  props: {\n    value: Object,\n  },\n\n  setup(props) {\n    const formatted = computed(() => {\n      return Money.save(props.value)\n        || '$0';\n    });\n\n    return {\n      formatted,\n    }\n  },\n};\n</script>\n","import { render } from \"./money.vue?vue&type=template&id=3911a355\"\nimport script from \"./money.vue?vue&type=script&lang=js\"\nexport * from \"./money.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./tag-index-entry.vue?vue&type=template&id=c3f5fc70&scoped=true\"\nimport script from \"./tag-index-entry.vue?vue&type=script&lang=js\"\nexport * from \"./tag-index-entry.vue?vue&type=script&lang=js\"\n\nimport \"./tag-index-entry.vue?vue&type=style&index=0&id=c3f5fc70&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c3f5fc70\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=ee4b93dc\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <v-dialog\n    :modelValue=\"editingDate != null\"\n    @update:modelValue=\"editingDate = null\"\n  >\n    <v-card class=\"pb-4\">\n      <v-text-field\n        v-model=\"dateInput\"\n        ref=\"dateTextField\"\n        label=\"mm/dd/yyyy\"\n        @keydown=\"$event.keyCode == 13 && (editingDate = null)\"\n      />\n    </v-card>\n  </v-dialog>\n\n  <v-flex>\n    <v-button\n      x-small\n      @click=\"editDate('before')\"\n      :color=\"filter.before ? 'primary' : 'default'\"\n    >\n      <span>\n        Before\n        <date v-if=\"filter.before\" :value=\"filter.before\" />\n      </span>\n    </v-button>\n\n    <v-button\n      x-small\n      class=\"ml-3\"\n      @click=\"editDate('after')\"\n      :color=\"filter.after ? 'primary' : 'default'\"\n    >\n      <span>\n        After\n        <date v-if=\"filter.after\" :value=\"filter.after\" />\n      </span>\n    </v-button>\n\n    <v-button\n      x-small\n      class=\"ml-3\"\n      @click=\"filter.exact = !filter.exact\"\n      :color=\"filter.exact ? 'primary' : 'default'\"\n    >\n      <span>exact</span>\n    </v-button>\n  </v-flex>\n</template>\n\n<script>\nimport { shallowRef, watch } from 'vue';\nimport { Date } from 'common';\n\nimport date from '../date';\n\nexport default {\n  name: 'filter-editor',\n  components: {\n    date,\n  },\n\n  props: {\n    filter: Object,\n  },\n\n  setup(props) {\n    const editingDate = shallowRef(null);\n    const dateInput = shallowRef(null);\n    const dateTextField = shallowRef(null);\n    const exactCheckbox = shallowRef(null);\n\n    watch(editingDate, (v, old) => {\n      if (v == null) {\n        try {\n          const date = Date.load(dateInput.value);\n          props.filter[old] = date;\n        } catch { }\n        dateInput.value = '';\n      } else {\n        setImmediate(() => {\n          dateTextField.value.focus();\n        });\n      }\n    });\n\n    return {\n      dateInput,\n      dateTextField,\n      editingDate,\n      exactCheckbox,\n\n      editDate(key) {\n        if (props.filter[key] === null) {\n          editingDate.value = key;\n        } else {\n          props.filter[key] = null;\n        }\n      },\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.exact-box {\n  cursor: pointer;\n  > * {\n    cursor: pointer;\n  }\n}\n</style>\n","<template>\n  <span>{{ formatted }}</span>\n</template>\n\n<script>\nimport { computed } from 'vue';\n\nimport { Date } from 'common';\n\nexport default {\n  name: 'date',\n\n  props: {\n    value: Object,\n  },\n\n  setup(props) {\n    const formatted = computed(() => {\n      return Date.save(props.value);\n    });\n\n    return {\n      formatted,\n    }\n  },\n};\n</script>\n","import { render } from \"./date.vue?vue&type=template&id=aac54c1a\"\nimport script from \"./date.vue?vue&type=script&lang=js\"\nexport * from \"./date.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=3b8f6374&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3b8f6374&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3b8f6374\"\n\nexport default script","<template>\n  <v-flex\n    class=\"expense py-1 px-2\"\n    v-ripple\n    v-show=\"visible\"\n    :class=\"{ active: editing.has(expense) }\"\n    @click=\"toggle\"\n  >\n    <v-flex justify-start align-center class=\"date\">\n      <date :value=\"expense.transaction.date\" />\n    </v-flex>\n\n    <v-flex justify-end align-center class=\"money\">\n      <money :value=\"expense.transaction.value\" />\n    </v-flex>\n\n    <v-flex justify-start align-center class=\"tags px-2\">\n      <v-button text x-small v-for=\"tag in expense.tags\" :key=\"tag\">\n        {{ tag.value }}\n      </v-button>\n    </v-flex>\n\n    <v-flex justify-start align-center class=\"description\">\n      <span v-if=\"expense.details\">\n        {{ expense.details }}\n      </span>\n\n      <span v-else style=\"font-family: Roboto Mono; font-size: 0.9em\">\n        {{ expense.transaction.description }}\n      </span>\n    </v-flex>\n  </v-flex>\n</template>\n\n<script>\nimport { computed, inject } from 'vue';\n\nimport Date from './date';\nimport Money from './money';\n\nexport default {\n  name: 'expense',\n  components: {\n    Date,\n    Money,\n  },\n\n  props: {\n    expense: Object,\n    editing: Object,\n  },\n\n  setup(props) {\n    const data = inject('data');\n    const filter = inject('filter');\n\n    const visible = computed(() => {\n      return filter.match(props.expense);\n    });\n\n    return {\n      filter,\n      visible,\n\n      toggle() {\n        if (props.editing.has(props.expense))\n          props.editing.delete(props.expense);\n        else\n          props.editing.add(props.expense)\n      },\n\n      del() {\n        const index = data.expenses.indexOf(props.expense);\n        data.expenses.splice(index, 1);\n      },\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@mfro/vue-ui/src/style.scss\";\n\n.expense {\n  cursor: pointer;\n  position: relative;\n  width: 80em;\n\n  &:hover {\n    background-color: #efefef;\n  }\n\n  &.active {\n    background-color: lighten($primary, 40%);\n  }\n\n  &:hover.active {\n    background-color: lighten($primary, 35%);\n  }\n\n  .date {\n    flex: 0 0 6em;\n\n    // .overlay {\n    //   opacity: 0;\n    //   transition: opacity 80ms;\n    //   position: absolute;\n    //   z-index: 1;\n    // }\n\n    // .date-actual {\n    //   opacity: 1;\n    //   transition: opacity 80ms;\n    // }\n\n    // &:hover > .overlay {\n    //   opacity: 1;\n    // }\n\n    // &:hover > .date-actual {\n    //   opacity: 0;\n    // }\n  }\n\n  .money {\n    flex: 0 0 6em;\n  }\n\n  .tags {\n    flex: 0 0 20em;\n  }\n\n  .description {\n    flex: 1 1 0;\n  }\n}\n</style>\n","import { render } from \"./expense.vue?vue&type=template&id=6b00c97b&scoped=true\"\nimport script from \"./expense.vue?vue&type=script&lang=js\"\nexport * from \"./expense.vue?vue&type=script&lang=js\"\n\nimport \"./expense.vue?vue&type=style&index=0&id=6b00c97b&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6b00c97b\"\n\nexport default script","import { render } from \"./main.vue?vue&type=template&id=abead1dc&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\nimport \"./main.vue?vue&type=style&index=0&id=abead1dc&lang=scss\"\nimport \"./main.vue?vue&type=style&index=1&id=abead1dc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-abead1dc\"\n\nexport default script","import { shallowReactive, computed } from 'vue';\nimport { Tag, Expense, Data, Date } from 'common';\n\nimport { myReactive } from '@/main';\n\nexport interface Filter {\n  exact: boolean;\n  include: Set<Tag>;\n  exclude: Set<Tag>;\n  before: Date | null;\n  after: Date | null;\n  match: (e: Expense) => boolean;\n  result: Expense[];\n}\n\nexport function initFilter(data: Data): Filter {\n  const filter: Filter = myReactive({\n    exact: false,\n    include: shallowReactive(new Set()),\n    exclude: shallowReactive(new Set()),\n    before: null,\n    after: null,\n\n    match: (e: Expense) => {\n      return ([...filter.include].every(t => e.tags.has(t)))\n        && ([...filter.exclude].every(t => !e.tags.has(t)))\n        && (!filter.exact || e.tags.size == filter.include.size)\n        && (filter.before == null || Date.lt(e.transaction.date, filter.before) || Date.eq(e.transaction.date, filter.before))\n        && (filter.after == null || Date.lt(filter.after, e.transaction.date) || Date.eq(filter.after, e.transaction.date));\n    },\n    result: computed(() => {\n      return data.expenses.filter(e => filter.match(e));\n    }),\n  });\n\n  return filter;\n}\n","import { computed } from 'vue';\nimport { Data, Money, Tag } from 'common';\n\nimport { Filter } from './filter';\n\nexport interface Cache {\n  byTag(tag: Tag): { total: Money };\n  byTagFiltered(tag: Tag): { total: Money };\n}\n\nexport function initCache(data: Data, filter: Filter): Cache {\n  const byTag = computed(() => {\n    const map = new Map();\n    for (const expense of data.expenses) {\n      for (const tag of expense.tags) {\n        let entry = map.get(tag);\n        if (!entry) map.set(tag, entry = { total: { cents: 0 } });\n        entry.total.cents += expense.transaction.value.cents;\n      }\n    }\n    return map;\n  });\n\n  const byTagFiltered = computed(() => {\n    const map = new Map();\n    for (const expense of filter.result) {\n      for (const tag of expense.tags) {\n        let entry = map.get(tag);\n        if (!entry) map.set(tag, entry = { total: { cents: 0 } });\n        entry.total.cents += expense.transaction.value.cents;\n      }\n    }\n    return map;\n  });\n\n  return {\n    byTag: (tag) => byTag.value.get(tag) ?? { total: { cents: 0 } },\n    byTagFiltered: (tag) => byTagFiltered.value.get(tag) ?? { total: { cents: 0 } },\n  };\n}\n","import { Chart, registerables } from 'chart.js';\nimport { watchEffect } from 'vue';\nimport { assert } from '@mfro/ts-common/assert';\nimport { Data } from 'common';\n\nimport { Filter } from './filter';\nimport { Cache } from './cache';\nimport { myReactive } from '@/main';\n\nChart.register(...registerables);\n\nexport interface Graph {\n  type: GraphType;\n  canvas: HTMLCanvasElement | null;\n}\n\nexport type GraphType = 'tag' | 'month' | 'day';\n\nexport function initGraph(data: Data, filter: Filter, cache: Cache) {\n  let chart: Chart<any> | undefined;\n  let graph: Graph = myReactive({\n    type: 'tag',\n    canvas: null,\n  });\n\n  watchEffect(render, { flush: 'post' });\n  window.addEventListener('resize', render);\n\n  return graph;\n\n  function render() {\n    chart?.destroy();\n\n    if (!graph.canvas || !graph.type) return;\n\n    const bounds = graph.canvas.getBoundingClientRect()\n    const context = graph.canvas.getContext('2d');\n    assert(context != null, 'context');\n\n    if (graph.type == 'tag') {\n      const src = data.tags\n        .filter(tag => !filter.include.has(tag))\n        .map(t => [t, cache.byTagFiltered(t)] as const)\n        .filter(([tag, info]) => info.total.cents != 0)\n        .map(([tag, info]) => [tag.value, info.total.cents / 100] as const)\n        .sort((a, b) => a[1] - b[1]);\n\n      const labels = src.map(v => v[0]);\n      const values = src.map(v => v[1]);\n\n      chart = new Chart(context, {\n        type: 'bar',\n        data: {\n          labels,\n          datasets: [{\n            label: 'money',\n            data: values,\n            backgroundColor: [\n              // '#a50026',\n              // '#d73027',\n              // '#f46d43',\n              // '#fdae61',\n              // '#fee08b',\n              // '#ffffbf',\n              // '#d9ef8b',\n              // '#a6d96a',\n              // '#66bd63',\n              '#1a9850',\n              // '#006837',\n            ],\n          }],\n        },\n        options: {\n          aspectRatio: bounds.width / bounds.height,\n          indexAxis: 'y',\n        },\n      });\n    } else {\n      const months = new Map<string, { date: Date, value: number }>();\n\n      for (const expense of filter.result) {\n        const date = graph.type == 'day'\n          ? new Date(expense.transaction.date.year, expense.transaction.date.month - 1, expense.transaction.date.day)\n          : new Date(expense.transaction.date.year, expense.transaction.date.month - 1);\n\n        const month = date.toLocaleDateString(undefined, {\n          year: 'numeric',\n          month: 'short',\n          day: graph.type == 'day' ? 'numeric' : undefined,\n        });\n\n        let info = months.get(month);\n        if (!info) months.set(month, info = { date, value: 0 });\n\n        info.value += expense.transaction.value.cents;\n      }\n\n      const src = [...months].sort((a, b) => a[1].date.valueOf() - b[1].date.valueOf());\n\n      const labels = src.map(v => v[0]);\n      const data = src.map(v => v[1].value / 100);\n\n      chart = new Chart(context, {\n        type: 'bar',\n        data: {\n          labels,\n          datasets: [{\n            label: 'money',\n            data,\n            backgroundColor: [\n              // '#a50026',\n              // '#d73027',\n              // '#f46d43',\n              // '#fdae61',\n              // '#fee08b',\n              // '#ffffbf',\n              // '#d9ef8b',\n              // '#a6d96a',\n              // '#66bd63',\n              '#1a9850',\n              // '#006837',\n            ],\n          }],\n        },\n        options: {\n          aspectRatio: bounds.width / bounds.height,\n          indexAxis: 'y',\n        },\n      });\n    }\n  }\n}\n","import csv from 'csv-parse/lib/sync'\nimport { Data, Tag, Transaction } from 'common';\nimport { shallowReactive } from 'vue';\n\nexport interface Import {\n  doImport(): void;\n}\n\nexport function initImport(data: Data): Import {\n  return {\n    async doImport() {\n      const [file] = await window.showOpenFilePicker({\n        types: [{\n          description: 'CSV',\n          accept: {\n            'text/csv': ['.csv'],\n          },\n        }],\n      });\n\n      const fileData = await file.getFile();\n      const fileText = await fileData.text();\n\n      const rows: string[][] = csv(fileText, {\n        from_line: 2,\n      });\n\n      const loaded = rows.map(row => Transaction.load(row));\n      loaded.reverse();\n\n      const mostRecent = data.transactions[data.transactions.length - 1];\n      const index = mostRecent != null\n        ? loaded.findIndex(t => Transaction.eq(mostRecent, t)) + 1\n        : 0;\n\n      const newTransactions = loaded.slice(index);\n      data.transactions.push(...newTransactions);\n      data.expenses.push(...newTransactions.map(t => {\n        return shallowReactive({\n          transaction: t,\n          tags: shallowReactive(new Set<Tag>()),\n          details: '',\n        });\n      }));\n    },\n  };\n}\n","import { createApp, proxyRefs, shallowReactive, ShallowUnwrapRef } from 'vue'\nimport { framework } from '@mfro/vue-ui'\n\nimport { Data } from 'common';\n\nimport App from './main.vue'\n\nimport { initStorage, StorageState } from './modules/storage';\nimport { initFilter } from './modules/filter';\nimport { initCache } from './modules/cache';\nimport { initGraph } from './modules/graph';\nimport { initImport } from './modules/import';\n\nexport function myReactive<T extends object>(arg: T): ShallowUnwrapRef<T> {\n  return shallowReactive(proxyRefs(arg));\n}\n\nconst data: Data = {\n  tags: shallowReactive([]),\n  expenses: shallowReactive([]),\n  transactions: shallowReactive([]),\n};\n\nconst storage = initStorage(data);\nconst filter = initFilter(data);\nconst cache = initCache(data, filter);\nconst graph = initGraph(data, filter, cache);\nconst imports = initImport(data);\n\nconst app = createApp(App);\n\napp.use(framework);\n\napp.provide('data', data);\napp.provide('storage', storage);\napp.provide('filter', filter);\napp.provide('cache', cache);\napp.provide('graph', graph);\napp.provide('import', imports);\n\napp.mount('#app');\n\nwindow.addEventListener('beforeunload', e => {\n  if (storage.state == StorageState.changed || storage.state == StorageState.saving) {\n    e.preventDefault();\n    e.returnValue = '';\n  }\n});\n","import { assert } from '@mfro/ts-common/assert';\nimport { Octokit, RestEndpointMethodTypes } from '@octokit/rest';\n\nconst clientId = '70e7cbe421d5790c41b0';\n\ntype User = RestEndpointMethodTypes[\"users\"][\"getAuthenticated\"][\"response\"][\"data\"];\n\ninterface GithubAuthorization {\n  access_token: string;\n  token_type: string;\n  scope: string;\n}\n\ninterface Context {\n  api: Octokit;\n  auth: GithubAuthorization;\n  user: User;\n  filePath: string;\n  fileHash: string | null;\n}\n\nlet context: Context | undefined;\n\nfunction authStrategy(auth: GithubAuthorization) {\n  return {\n    hook: (request: Function, options: any) => {\n      options.headers['authorization'] = `Bearer ${auth.access_token}`;\n      return request(options);\n    },\n  };\n}\n\nexport async function load(filePath: string) {\n  assert(context === undefined, 're-init');\n\n  const currentUrl = new URL(location.href);\n  const code = currentUrl.searchParams.get('code');\n\n  if (code != null) {\n    const redirect = localStorage.getItem('mfro:debug-redirect');\n    if (redirect) {\n      const url = new URL(redirect);\n      url.searchParams.set('code', code);\n      location.assign(url.toString());\n      assert(false, 'location.assign');\n    }\n\n    currentUrl.searchParams.delete('code');\n    history.replaceState(null, document.title, currentUrl.toString());\n\n    const url = new URL('https://api.mfro.me/github-auth-proxy/login/oauth/access_token');\n    url.searchParams.set('code', code);\n    url.searchParams.set('client_id', clientId);\n\n    const authRsp = await fetch(url.toString(), {\n      method: 'POST',\n      headers: { 'accept': 'application/vnd.github.v3+json' },\n    });\n\n    const auth: GithubAuthorization = await authRsp.json();\n\n    const api = new Octokit({ auth, authStrategy });\n\n    const { data: user } = await api.users.getAuthenticated();\n\n    let content, fileHash;\n    try {\n      const existing = await api.repos.getContent({\n        owner: user.login,\n        repo: 'mfro-backend',\n        path: filePath,\n      });\n\n      assert(typeof existing.data == 'object', 'test');\n      assert('content' in existing.data, 'test');\n      content = Buffer.from(existing.data.content, 'base64');\n      fileHash = existing.data.sha;\n    } catch (e) {\n      content = null;\n      fileHash = null;\n    }\n\n    context = {\n      api,\n      auth,\n      user,\n      filePath,\n      fileHash,\n    };\n\n    return content;\n  } else {\n    const url = new URL('https://github.com/login/oauth/authorize');\n    url.searchParams.set('scope', 'repo read:user user:email');\n    url.searchParams.set('client_id', clientId);\n\n    location.assign(url.toString());\n    assert(false, 'location.assign');\n  }\n}\n\nexport async function save(content: Buffer) {\n  assert(context !== undefined, 'not init');\n  const { api, user, filePath, fileHash } = context;\n\n  const { data: result } = await api.repos.createOrUpdateFileContents({\n    owner: user.login,\n    repo: 'mfro-backend',\n    path: filePath,\n    message: `update ${filePath}`,\n    content: content.toString('base64'),\n    sha: fileHash ?? undefined,\n    author: {\n      name: 'mfro github backend',\n      email: 'backend@mfro.me',\n    },\n    committer: {\n      name: user.name!,\n      email: user.email!,\n    },\n  });\n\n  context.fileHash = result.content?.sha ?? null;\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=3b8f6374&lang=scss&scoped=true\""],"sourceRoot":""}